<html class="has-navbar-fixed-top" lang="en"><head><title>Thoth.Elmish.Debouncer Â· Thoth.Elmish.Debouncer</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/Thoth.Elmish.Debouncer/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://thoth-org.github.io//Thoth.Elmish.Debouncer/">Thoth.Elmish.Debouncer</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-hidden-mobile" href="/Thoth.Elmish.Debouncer/changelog.html">Changelog</a><a class="navbar-item is-hidden-mobile" href="https://gitter.im/fable-compiler/Fable">Support</a><a class="navbar-item is-hidden-mobile" href="https://www.patreon.com/MangelMaxime">Donate</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item" href="https://twitter.com/MangelMaxime"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="/Thoth.Elmish.Debouncer/changelog.html">Changelog</a><a class="nacara-navbar-menu-item" href="https://gitter.im/fable-compiler/Fable">Support</a><a class="nacara-navbar-menu-item" href="https://www.patreon.com/MangelMaxime">Donate</a><a class="nacara-navbar-menu-item" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer">GitHub</a><a class="nacara-navbar-menu-item" href="https://twitter.com/MangelMaxime">Twitter</a></div></div></nav><div class="grey-overlay"></div><div class="nacara-content"><div class="container"><div class="columns is-gapless is-mobile"><div class="column is-menu-column is-3-desktop is-hidden-touch"><div class="menu-container"><aside class="menu"><ul class="menu-list"><li><a class=" is-active">Table of content</a></li><li><ul class="table-of-content"><li data-toc-rank="2"><a href="#kezako-" data-toc-element="true">Kezako ?</a></li><li data-toc-rank="2"><a href="#demo" data-toc-element="true">Demo</a></li><li data-toc-rank="2"><a href="#how-to-use-" data-toc-element="true">How to use ?</a></li></ul></li></ul></aside></div></div><div class="column is-9-desktop is-full-touch"><section class="section"><div class="content"><header class="page-header"><div class="columns is-vcentered"><div class="column"></div><div class="column is-narrow"><a class="button is-hidden-touch is-ghost" target="_blank" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer/edit/master/docs/index.md">Edit</a></div></div><h1 class="title is-1">Thoth.Elmish.Debouncer</h1></header><div><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtki{font-style:italic}.atom-one-light .mtk7{color:#a0a1a7}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk4{color:#c18401}.atom-one-light .mtk5{color:#e45649}.atom-one-light .mtk6{color:#986801}.atom-one-light .mtk10{color:#50a14f}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><h1 id=debouncer>Debouncer<a href=#debouncer aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h1><h2 id=kezako->Kezako ?<a href=#kezako- aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><blockquote><p>Debouncing enforces that a function not be called again until a certain amount of time has passed without it being called. As in "execute this function only if 100 milliseconds have passed without it being called."<p>Perhaps a function is called 1,000 times in a quick burst, dispersed over 3 seconds, then stops being called. If you have debounced it at 100 milliseconds, the function will only fire once, at 3.1 seconds, once the burst is over. Each time the function is called during the burst it resets the debouncing timer.<p><a href=https://css-tricks.com/the-difference-between-throttling-and-debouncing/>Source</a></blockquote><h2 id=demo>Demo<a href=#demo aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><p>The demo works as follows:<ol><li>Ask the user to type something<li>The user <strong>is typing</strong><li>When the user <strong>stops typing</strong>, <strong>disable</strong> the input and <strong>inform</strong> the user.<li>After a <strong>short period</strong> of time, <strong>reset</strong> the demo.</ol><div class=columns><div class="column is-6 is-offset-3"><div id=debouncer_demo></div></div></div><div class=has-text-centered><p><em><a href=https://github.com/MangelMaxime/Thoth/blob/master/demos/Thoth.Elmish.Demo/src/Debouncer.fs>View the code</a></em></div><script src=/Thoth.Elmish.Debouncer/demo/index.js></script><script>startDemo("debouncer_demo")</script><h2 id=how-to-use->How to use ?<a href=#how-to-use- aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><ol><li>Store the <code>Debouncer</code> instance in your model</ol><pre class="atom-one-light grvsc-container"data-index=0 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Model definition</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>type</span><span class=mtk1> </span><span class=mtk4>Model</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>{</span><span class=mtk1> Debouncer </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>Debouncer</span><span class=mtk1>.</span><span class=mtk4>State</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>      </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Model initialization</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>init</span><span class=mtk1> </span><span class=mtk6>()</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>{</span><span class=mtk1> Debouncer </span><span class=mtk14>=</span><span class=mtk1> Debouncer.create</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>      </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span></code></pre><ol start=2><li>Register the message dedicated to the <code>Debouncer</code></ol><pre class="atom-one-light grvsc-container"data-index=1 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Msg definition</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>type</span><span class=mtk1> </span><span class=mtk4>Msg</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|</span><span class=mtk1> DebouncerSelfMsg </span><span class=mtk14>of</span><span class=mtk1> </span><span class=mtk4>Debouncer.SelfMessage</span><span class=mtk14>&lt;</span><span class=mtk4>Msg</span><span class=mtk14>></span><span class=mtk1> </span><span class="mtk7 mtki">// This is the message used by the Debouncer</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|</span><span class=mtk1> ChangeValue </span><span class=mtk14>of</span><span class=mtk1> </span><span class=mtk4>string</span><span class=mtk1> </span><span class="mtk7 mtki">// Message trigger each time the user type in the input</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|</span><span class=mtk1> EndOfInput </span><span class="mtk7 mtki">// Message we want to debounce</span></span></span></code></pre><ol start=3><li>Handle <code>DebouncerSelfMsg</code> in your update function</ol><pre class="atom-one-light grvsc-container"data-index=2 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk14>private</span><span class=mtk1> </span><span class=mtk5>update</span><span class=mtk1> msg model </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>match</span><span class=mtk1> msg </span><span class=mtk14>with</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|</span><span class=mtk1> DebouncerSelfMsg debouncerMsg </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>debouncerModel</span><span class=mtk14>,</span><span class=mtk1> debouncerCmd</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> Debouncer.update debouncerMsg model.Debouncer</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>{</span><span class=mtk1> model </span><span class=mtk14>with</span><span class=mtk1> Debouncer </span><span class=mtk14>=</span><span class=mtk1> debouncerModel </span><span class=mtk14>},</span><span class=mtk1> debouncerCmd</span></span></span></code></pre><p><em>Please note we don't need to use <code>Cmd.map</code> over <code>debouncerCmd</code> because it return a <code>Msg</code> directly</em><ol start=4><li>Bounce <code>EndOfInput</code> each time the user types something in the input</ol><pre class="atom-one-light grvsc-container"data-index=3 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk14>private</span><span class=mtk1> </span><span class=mtk5>update</span><span class=mtk1> msg model </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>match</span><span class=mtk1> msg </span><span class=mtk14>with</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|</span><span class=mtk1> ChangeValue newValue </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>debouncerModel</span><span class=mtk14>,</span><span class=mtk1> debouncerCmd</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            model.Debouncer</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>|></span><span class=mtk1> Debouncer.bounce </span><span class=mtk14>(</span><span class=mtk1>TimeSpan.FromSeconds </span><span class=mtk6>1.5</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk10>"user_input"</span><span class=mtk1> EndOfInput</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>{</span><span class=mtk1> model </span><span class=mtk14>with</span><span class=mtk1> UserInput </span><span class=mtk14>=</span><span class=mtk1> newValue</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                     State </span><span class=mtk14>=</span><span class=mtk1> State.IsTyping</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                     Debouncer </span><span class=mtk14>=</span><span class=mtk1> debouncerModel </span><span class=mtk14>},</span><span class=mtk1> Cmd.batch </span><span class=mtk14>[</span><span class=mtk1> Cmd.map DebouncerSelfMsg debouncerCmd </span><span class=mtk14>]</span></span></span></code></pre><p><code>Debouncer.bounce</code> parameters:<pre class="atom-one-light grvsc-container"data-index=4 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>val</span><span class=mtk1> </span><span class=mtk5>bounce</span><span class=mtk14>:</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>   delay       </span><span class=mtk14>:</span><span class=mtk1> TimeSpan        </span><span class=mtk14>-></span><span class=mtk1> </span><span class="mtk7 mtki">// Delay before trying to send `msgToSend`</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>   id          </span><span class=mtk14>:</span><span class=mtk1> Debouncer.Id    </span><span class=mtk14>-></span><span class=mtk1> </span><span class="mtk7 mtki">// Id used to identify the message in the debouncer. This is useful if you want to debounce a different message</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>   msgToSend   </span><span class=mtk14>:</span><span class=mtk1> 'a              </span><span class=mtk14>-></span><span class=mtk1> </span><span class="mtk7 mtki">// The `Msg` to send</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>   currentState</span><span class=mtk14>:</span><span class=mtk1> Debouncer.State    </span><span class="mtk7 mtki">// Current debouncer state</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>              </span><span class=mtk14>-></span><span class=mtk1> Debouncer.State </span><span class=mtk14>*</span><span class=mtk1> Cmd</span><span class=mtk14>&lt;</span><span class=mtk1>Debouncer.SelfMessage</span><span class=mtk14>&lt;</span><span class=mtk1>'a</span><span class=mtk14>>></span></span></span></code></pre></div></div></section></div></div></div></div><script async="" src="/Thoth.Elmish.Debouncer/resources/nacara-standard-layouts/scripts/menu.js"></script></body></html>